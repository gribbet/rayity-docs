{"version":3,"sources":["webpack:///webpack/bootstrap 1e8bbd66ad9be2a71f4e","webpack:///../rayity/src/expression.ts","webpack:///../rayity/src/material.ts","webpack:///../rayity/src/shape.ts","webpack:///../rayity/src/camera.ts","webpack:///../rayity/src/options.ts","webpack:///./index.ts","webpack:///../rayity/src/index.ts","webpack:///../rayity/src/model.ts","webpack:///../rayity/src/scene.ts","webpack:///../rayity/src/viewer.ts","webpack:///../rayity/src/renderer.ts","webpack:///../rayity/src/build.ts"],"names":[],"mappings":"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","file":"assets/js/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1e8bbd66ad9be2a71f4e","/**\n * Functionality related to managing GLSL expressions\n */\n\n/** GLSL code */\nexport type Code = string;\n\n/** GLSL expression. May depend on other expression */\nexport interface Expression {\n\t/** Unique hash for the expression */\n\treadonly id: string;\n\t/** GLSL code for the expression */\n\treadonly body: Code;\n\t/** Dependent expressions */\n\treadonly dependencies: Expression[];\n\t/** toString to support generation through string templates */\n\treadonly toString: () => string;\n}\n\nlet context: Expression[] = [];\n\n/** Create an [[Expression]] */\nexport function expression(body: Code, dependencies?: Expression[]): Expression {\n\tdependencies = dependencies || context;\n\tlet id = generateId(body);\n\tlet self = {\n\t\tid: id,\n\t\tbody: body,\n\t\tdependencies: dependencies,\n\t\ttoString: () => {\n\t\t\tif (context.indexOf(self) === -1)\n\t\t\t\tcontext.push(self);\n\t\t\treturn id;\n\t\t}\n\t};\n\tcontext = [];\n\treturn self;\n}\n\nfunction generateId(body: Code): string {\n\treturn \"a\" + hash(body).toString(16);\n}\n\nfunction hash(x: string): number {\n\tlet hash = 5381;\n\n\tfor (let i = 0; i < x.length; i++)\n\t\thash = (hash * 33) ^ x.charCodeAt(i);\n\n\treturn hash >>> 0;\n}\n\n/** A constant-valued [[Expression]] */\nexport function value(\n\tx: number = 0,\n\ty: number = x,\n\tz: number = y): Expression {\n\treturn expression(`vec3(${x.toPrecision(10)}, ${y.toPrecision(10)}, ${z.toPrecision(10)})`, []);\n}\n\n/** An expression which is equal to a named variable */\nexport function variable(name: string): Expression {\n\treturn expression(name, []);\n}\n\n/** A random value */\nexport function random(seed: Expression): Expression {\n\treturn expression(`fract(sin(dot(${seed} + 1000.0, vec3(12.9898, 78.233, 26.724))) * 43758.5453)`);\n}\n\n/** Minimum of x, y, and z components */\nexport function minNorm(v: Expression): Expression {\n\treturn expression(`min(min(${v}.x, ${v}.y), ${v}.z)`);\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/expression.ts","/**\n * Module for creating a [[Material]]\n */\n\n/** Imports */\nimport { Expression, expression, value } from './expression';\n\nexport interface Material {\n\t/** Material transmittance. 0 to 1 */\n\treadonly transmittance: Expression;\n\t/** Material smoothness. 0 to 1*/\n\treadonly smoothness: Expression;\n\t/** Material index of refraction */\n\treadonly refraction: Expression;\n\t/** Material's average scatter distance */\n\treadonly scatter: Expression;\n\t/** Material color */\n\treadonly color: Expression;\n\t/** Emission color */\n\treadonly emissivity: Expression;\n}\n\nexport interface MaterialOptions {\n\t/** \n\t * Material transmittance. 0 to 1\n\t * \n\t * Default: 0\n\t */\n\ttransmittance?: Expression;\n\t/** \n\t * Material smoothness. 0 to 1\n\t * \n\t * Default: 0\n\t */\n\tsmoothness?: Expression;\n\t/** \n\t * Material index of refraction \n\t * \n\t * Default: 1\n\t */\n\trefraction?: Expression;\n\t/** \n\t * Material's average scatter distance. 0 to disable\n\t * \n\t * Default: 0\n\t */\n\tscatter?: Expression;\n\t/** \n\t * Material color \n\t * \n\t * Default: (1, 1, 1)\n\t */\n\tcolor?: Expression;\n\t/** \n\t * Emission color \n\t * \n\t * Default: (0, 0, 0) \n\t */\n\temissivity?: Expression;\n}\n\n/** Create a [[Material]] */\nexport function material(values?: MaterialOptions): Material {\n\treturn Object.assign({\n\t\ttransmittance: value(0),\n\t\tsmoothness: value(0),\n\t\trefraction: value(1),\n\t\tscatter: value(0),\n\t\tcolor: value(1, 1, 1),\n\t\temissivity: value(0, 0, 0)\n\t}, values || {});\n}\n\nexport interface SpotlightOptions {\n\t/**\n\t * Direction of light\n\t * \n\t * Default: (0, 1, 0)\n\t */\n\tdirection?: Expression;\n\t/**\n\t * Light color\n\t * \n\t * Default: (1, 1, 1)\n\t */\n\tcolor?: Expression;\n\t/**\n\t * Spread factor that specifies light hardness. 0 for hard light (sharp shadows), 1 for ambient light only\n\t * \n\t * Default: 0.5\n\t */\n\tspread?: Expression;\n\t/**\n\t * Ambiebnt color\n\t * \n\t * Default: (0, 0, 0)\n\t */\n\tambient?: Expression;\n}\n\n/** Create a spotlight [[Material]] */\nexport function spotlight(options?: SpotlightOptions): Material {\n\toptions = options || {};\n\tlet direction = options.direction || value(0, 1, 0);\n\tlet color = options.color || value(1, 1, 1);\n\tlet spread = options.spread || value(0.05);\n\tlet ambient = options.ambient || value(0);\n\treturn material({\n\t\tcolor: value(0),\n\t\temissivity: expression(\n\t\t\t`${color} / ${spread}.x * pow(dot(normalize(p), normalize(${direction})) * 0.5 + 0.5, 1.0 / ${spread}.x - 1.0) + ${ambient}`)\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/material.ts","/**\n * Module for creating shape distance functions\n */\n\n/** Imports */\nimport { Expression, expression, value, random, minNorm } from './expression';\n\n/** A distance function */\nexport interface Shape {\n\t/** Calculate the distance from `position` */\n\treadonly call: (position: Expression) => Expression,\n}\n\n/** Create a [[Shape]] */\nexport function shape(call: (position: Expression) => Expression): Shape {\n\treturn {\n\t\tcall: call\n\t};\n}\n\n/** Null distance function */\nexport function zero(): Shape {\n\treturn shape(p =>\n\t\texpression(`MAX_VALUE`));\n}\n\n/** Unit distance function */\nexport function unit(): Shape {\n\treturn shape(p =>\n\t\texpression(`-MAX_VALUE`));\n}\n\n/** Sphere of diameter 1 */\nexport function sphere(): Shape {\n\treturn shape(p =>\n\t\texpression(`length(${p}) - 0.5`));\n}\n\n/** Plane given a `normal` and `offset` */\nexport function plane(normal: Expression, offset: Expression): Shape {\n\treturn shape(p =>\n\t\texpression(`dot(${p}, ${normal}) + ${offset}.x`));\n}\n\nfunction unitShape(normals: Expression[]): Shape {\n\treturn normals.reduce((s, n) =>\n\t\tintersection(s,\n\t\t\tplane(n, value(-0.5))),\n\t\tunit());\n}\n\n/** \n * <example id=\"tetrahedron\" />\n * \n * Tetrahedron with circumscribed diameter of 1 \n */\nexport function tetrahedron(): Shape {\n\tlet l = Math.sqrt(3);\n\treturn unitShape([\n\t\tvalue(-1 / l, -1 / l, -1 / l),\n\t\tvalue(-1 / l, 1 / l, 1 / l),\n\t\tvalue(1 / l, -1 / l, 1 / l),\n\t\tvalue(1 / l, 1 / l, -1 / l),\n\t]);\n}\n\n/** \n * <example id=\"tetrahedron\" />\n * \n * Cube of width 1 \n */\nexport function cube(): Shape {\n\treturn unitShape([\n\t\tvalue(1, 0, 0),\n\t\tvalue(-1, 0, 0),\n\t\tvalue(0, 1, 0),\n\t\tvalue(0, -1, 0),\n\t\tvalue(0, 0, 1),\n\t\tvalue(0, 0, -1)\n\t]);\n}\n\n/** Octohedron with circumscribed diameter of 1 */\nexport function octohedron(): Shape {\n\tlet l = Math.sqrt(3);\n\treturn unitShape([\n\t\tvalue(1 / l, 1 / l, 1 / l),\n\t\tvalue(1 / l, 1 / l, -1 / l),\n\t\tvalue(1 / l, -1 / l, 1 / l),\n\t\tvalue(1 / l, -1 / l, -1 / l),\n\t\tvalue(-1 / l, 1 / l, 1 / l),\n\t\tvalue(-1 / l, 1 / l, -1 / l),\n\t\tvalue(-1 / l, -1 / l, 1 / l),\n\t\tvalue(-1 / l, -1 / l, -1 / l),\n\t]);\n}\n\n/** \n * <example id=\"dodecahedron\" />\n * \n * Dodecahedron with circumscribed diameter of 1.  \n */\nexport function dodecahedron(): Shape {\n\tlet phi = 0.5 * (1 + Math.sqrt(5));\n\tlet l = Math.sqrt(phi * phi + 1);\n\treturn unitShape([\n\t\tvalue(phi / l, 1 / l, 0),\n\t\tvalue(phi / l, -1 / l, 0),\n\t\tvalue(0, phi / l, 1 / l),\n\t\tvalue(0, phi / l, -1 / l),\n\t\tvalue(1 / l, 0, phi / l),\n\t\tvalue(-1 / l, 0, phi / l),\n\t\tvalue(-phi / l, 1 / l, 0),\n\t\tvalue(-phi / l, -1 / l, 0),\n\t\tvalue(0, -phi / l, 1 / l),\n\t\tvalue(0, -phi / l, -1 / l),\n\t\tvalue(1 / l, 0, -phi / l),\n\t\tvalue(-1 / l, 0, -phi / l)\n\t]);\n}\n\n\n/** Cylinder of diameter 1 along the (0, 1, 0) axis */\nexport function cylinder(): Shape {\n\treturn shape(p =>\n\t\texpression(`length(${p}.xz) - 0.5`));\n}\n\n/** Torus with outer diameter of 1, inner radius of 0.1 */\nexport function torus(): Shape {\n\treturn shape(p =>\n\t\texpression(`length(vec2(length(${p}.xz) - 0.5, ${p}.y)) - 0.1`));\n}\n\n/** Move a [[Shape]] by `x` */\nexport function translate(x: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\ta.call(expression(`${p} - ${x}`)));\n}\n\n/** Scale a [[Shape]] by `x` */\nexport function scale(x: Expression, a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet q = a.call(expression(`${p} / ${x}.x`));\n\t\treturn expression(`${q} * ${x}.x`);\n\t});\n}\n\n/** Variable radius sphere with radius calculcated using `x` */\nexport function spheroid(x: (p: Expression) => Expression) {\n\treturn shape(p => expression(`length(${p}) - ${x(p)}`));\n}\n\nexport function max(a: Shape): Shape {\n\treturn shape(p =>\n\t\ta.call(expression(`max(${p}, 0.0)`)));\n}\n\n/** Stretch a [[Shape]] */\nexport function stretch(x: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\texpression(`${a.call(expression(`${p} / ${x}`))} * ${minNorm(x)}`));\n}\n\n/** Repeat a [[Shape]] with repetition factor `x`  */\nexport function repeat(x: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\ta.call(expression(`mod(${p} - ${x} * 0.5, ${x}) - ${x} * 0.5`)));\n}\n\n/** The union of two [[Shape]]s */\nexport function union(a: Shape, b: Shape): Shape {\n\treturn shape(p => {\n\t\tlet da = a.call(p);\n\t\tlet db = b.call(p);\n\t\treturn expression(`min(${da}, ${db})`)\n\t});\n}\n\n/** The intersection of two [[Shape]]s */\nexport function intersection(a: Shape, b: Shape): Shape {\n\treturn shape(p => {\n\t\tlet da = a.call(p);\n\t\tlet db = b.call(p);\n\t\treturn expression(`max(${da}, ${db})`)\n\t});\n}\n\n/** The difference of two [[Shape]]s */\nexport function difference(a: Shape, b: Shape): Shape {\n\treturn shape(p => {\n\t\tlet da = a.call(p);\n\t\tlet db = b.call(p);\n\t\treturn expression(`max(${da}, -${db})`)\n\t});\n}\n\nfunction smoothMin(k: Expression, a: Expression, b: Expression): Expression {\n\tlet h = expression(`clamp(0.5 + 0.5 * (${b} - ${a}) / ${k}, 0.0, 1.0)`);\n\treturn expression(`mix(${b}, ${a}, ${h}) - ${k} * ${h} * (1.0 - ${h})`);\n}\n\nfunction smoothMax(k: Expression, a: Expression, b: Expression): Expression {\n\tlet h = expression(`clamp(0.5 - 0.5 * (${b} - ${a}) / ${k}, 0.0, 1.0)`);\n\treturn expression(`mix(${b}, ${a}, ${h}) + ${k} * ${h} * (1.0 - ${h})`);\n}\n\n/** Smooth union */\nexport function smoothUnion(k: Expression, a: Shape, b: Shape): Shape {\n\treturn shape(p =>\n\t\tsmoothMin(k, a.call(p), b.call(p)));\n}\n\n/** Smooth intersection */\nexport function smoothIntersection(k: Expression, a: Shape, b: Shape): Shape {\n\treturn shape(p =>\n\t\tsmoothMax(k, a.call(p), b.call(p)));\n}\n\n/** Smooth difference */\nexport function smoothDifference(k: Expression, a: Shape, b: Shape): Shape {\n\treturn shape(p =>\n\t\tsmoothMax(k, a.call(p), expression(`${b.call(p)} * -1.0`)));\n}\n\n/** Expand a [[Shape]] by distance `k` */\nexport function expand(k: Expression, a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet da = a.call(p);\n\t\treturn expression(`${da} - ${k}.x`)\n\t});\n}\n\n/** Twist a [[Shape]] along the x-axis */\nexport function twistX(x: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\trotateX(expression(`vec3(${p}.x * ${x}.x)`), a).call(p));\n}\n\n/** Twist a [[Shape]] along the y-axis */\nexport function twistY(x: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\trotateY(expression(`vec3(${p}.y * ${x}.x)`), a).call(p));\n}\n\n/** Twist a [[Shape]] along the z-axis */\nexport function twistZ(x: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\trotateZ(expression(`vec3(${p}.z * ${x}.x)`), a).call(p));\n}\n\n/** Rotate a [[Shape]] about the x-axis */\nexport function rotateX(x: Expression, a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet c = expression(`cos(${x}.x), sin(${x}.x), 0`);\n\t\treturn a.call(expression(`mat3(1, 0, 0, 0, ${c}.x, ${c}.y, 0, -${c}.y, ${c}.x) * ${p}`))\n\t});\n}\n\n/** Rotate a [[Shape]] about the y-axis */\nexport function rotateY(x: Expression, a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet c = expression(`cos(${x}.x), sin(${x}.x), 0`);\n\t\treturn a.call(expression(`mat3(${c}.x, 0, -${c}.y, 0, 1, 0, ${c}.y, 0, ${c}.x) * ${p}`))\n\t});\n}\n\n/** Rotate a [[Shape]] about the z-axis */\nexport function rotateZ(x: Expression, a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet c = expression(`cos(${x}.x), sin(${x}.x), 0`);\n\t\treturn a.call(expression(`mat3(${c}.x, ${c}.y, 0, -${c}.y, ${c}.x, 0, 0, 0, 1) * ${p}`))\n\t});\n}\n\n/** Rotate a [[Shape]] about an arbitrary axis */\nexport function rotate(axis: Expression, x: Expression, a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet u = expression(`normalize(${axis})`);\n\t\tlet c = expression(`cos(${x}.x), sin(${x}.x), 0`);\n\t\treturn a.call(expression(`mat3(\n\t\t\t${c}.x + ${u}.x * ${u}.x * (1.0 - ${c}.x), \n\t\t\t${u}.x * ${u}.y * (1.0 - ${c}.x) - ${u}.z * ${c}.y,\n\t\t\t${u}.x * ${u}.z * (1.0 - ${c}.x) + ${u}.y * ${c}.y,\n\t\t\t${u}.y * ${u}.x * (1.0 - ${c}.x) + ${u}.z * ${c}.y,\n\t\t\t${c}.x + ${u}.y * ${u}.y * (1.0 - ${c}.x),\n\t\t\t${u}.x * ${u}.y * (1.0 - ${c}.x) - ${u}.x * ${c}.y,\n\t\t\t${u}.z * ${u}.x * (1.0 - ${c}.x) - ${u}.y * ${c}.y,\n\t\t\t${u}.z * ${u}.y * (1.0 - ${c}.x) + ${u}.x * ${c}.y,\n\t\t\t${c}.x +  ${u}.z * ${u}.z * (1.0 - ${c}.x)) * ${p}`));\n\t});\n}\n\n/** Wrap a [[Shape]] about the x-axis */\nexport function wrapX(a: Shape): Shape {\n\treturn shape(p => {\n\t\tlet c = expression(`length(${p}.yz)`);\n\t\tlet q = expression(`1, 1, max(0.01, abs(${p}.z))`);\n\t\treturn expression(`${a.call(expression(`${p}.x, asin(${p}.y / ${c}.x), ${c}.x`))} * ${minNorm(q)}`);\n\t});\n}\n\n/** Mirror a [[Shape]] */\nexport function mirror(normal: Expression, a: Shape): Shape {\n\treturn shape(p =>\n\t\ta.call(expression(`${p} - 2.0 * min(0.0, dot(${p}, ${normal})) * ${normal}`)));\n}\n\n/** Offset a [[Shape]] */\nexport function offset(x: (p: Expression) => Expression, a: Shape): Shape {\n\treturn shape(p => a.call(expression(`${p} - ${x(p)}`)));\n}\n\n/** A box with rounded corners */\nexport function smoothBox(dimensions: Expression, radius: Expression): Shape {\n\treturn mirror(value(1, 0, 0),\n\t\tmirror(value(0, 1, 0),\n\t\t\tmirror(value(0, 0, 1),\n\t\t\t\ttranslate(expression(`0.5 * (${dimensions} - ${radius})`),\n\t\t\t\t\tmax(\n\t\t\t\t\t\tscale(radius,\n\t\t\t\t\t\t\tsphere()))))));\n}\n\n/** A box with aritrary dimensions */\nexport function box(dimensions: Expression): Shape {\n\treturn shape(p => {\n\t\tconst d = expression(`abs(${p}) - ${dimensions}`);\n\t\treturn expression(`max(min(${d}.x, min(${d}.y, ${d}.z)), 0.0) + length(max(${d}, 0.0))`);\n\t});\n}\n\n/** \n * <example id=\"sierpinski\" />\n * \n * A sierpinksi fractal\n */\nexport function sierpinski(iterations: number = 5, a: Shape = tetrahedron()): Shape {\n\tlet l = Math.sqrt(2);\n\treturn Array(iterations)\n\t\t.fill(0)\n\t\t.reduce((shape, i) =>\n\t\t\tmirror(value(1 / l, 1 / l, 0),\n\t\t\t\tmirror(value(0, 1 / l, 1 / l),\n\t\t\t\t\tmirror(value(1 / l, 0, 1 / l),\n\t\t\t\t\t\tscale(value(0.5),\n\t\t\t\t\t\t\ttranslate(value(0.5 * Math.sqrt(3)),\n\t\t\t\t\t\t\t\tshape))))), a);\n}\n\n/** A recursive tree [[Shape]] */\nexport function tree(iterations: number = 8): Shape {\n\tlet factor = 0.58;\n\tlet length = 1.2;\n\tlet width = 0.1;\n\tlet angle = 50;\n\n\treturn Array(iterations)\n\t\t.fill(0)\n\t\t.reduce((shape, _, i) =>\n\t\t\tsmoothUnion(\n\t\t\t\tvalue(0.15 * Math.pow(factor, i)),\n\t\t\t\tshape,\n\t\t\t\tmirror(value(1 / Math.sqrt(2), 0, 1 / Math.sqrt(2)),\n\t\t\t\t\tmirror(value(1 / Math.sqrt(2), 0, -1 / Math.sqrt(2)),\n\t\t\t\t\t\ttranslate(\n\t\t\t\t\t\t\tvalue(\n\t\t\t\t\t\t\t\tlength * factor / 2 * Math.sin(angle / 180 * Math.PI),\n\t\t\t\t\t\t\t\tlength / 2 * (1 + factor / 2 * Math.cos(angle / 180 * Math.PI)),\n\t\t\t\t\t\t\t\t0),\n\t\t\t\t\t\t\tscale(value(factor),\n\t\t\t\t\t\t\t\trotateY(value(0.1),\n\t\t\t\t\t\t\t\t\trotateZ(value(angle / 180 * Math.PI),\n\t\t\t\t\t\t\t\t\t\tshape))))))),\n\t\tsmoothBox(value(width, length, width), value(width / 2)));\n}\n\n/** [[repeat]] where the repetition index can be used to generate the [[Shape]] */\nexport function modulate(\n\tx: Expression,\n\ta: (index: Expression) => Shape,\n\tbuffer: Expression = value(0.01)): Shape {\n\treturn shape(p => {\n\t\tlet offset = expression(`${p} + ${x} * 0.5`);\n\t\tlet index = expression(`floor(${offset} / ${x})`);\n\t\tlet center = expression(`${index} * ${x}`);\n\t\tlet local = expression(`${p} - ${center}`);\n\t\tlet mask = shape(p => {\n\t\t\tlet a = expression(`${buffer} + ${x} * 0.5 - abs(${p})`);\n\t\t\treturn expression(`min(min(${a}.x, ${a}.y), ${a}.z)`);\n\t\t});\n\t\treturn union(mask, a(index))\n\t\t\t.call(local);\n\t});\n}\n\n/** Choose a shape randomly */\nexport function choose(x: Expression, shapes: Shape[]): Shape {\n\treturn shape(p => {\n\t\treturn expression(shapes\n\t\t\t.map(_ => _.call(p))\n\t\t\t.reduce((code, d, i) =>\n\t\t\t\tcode + `${x}.x < ${((i + 1) / shapes.length).toPrecision(6)} ? ${d} : `, \"\") + \"vec3(0)\");\n\t});\n}\n\n/** Truchet */\nexport function truchet(): Shape {\n\tlet base = intersection(cube(), union(union(\n\t\ttranslate(value(0.5, 0, 0.5), torus()),\n\t\ttranslate(value(-0.5, 0.5, 0),\n\t\t\trotateX(value(Math.PI / 2),\n\t\t\t\ttorus()))),\n\t\ttranslate(value(0, -0.5, -0.5),\n\t\t\trotateZ(value(Math.PI / 2),\n\t\t\t\ttorus()))));\n\treturn modulate(value(1, 1, 1), index =>\n\t\tchoose(random(index), [\n\t\t\tbase,\n\t\t\trotateX(value(Math.PI / 2), base),\n\t\t\trotateX(value(Math.PI), base),\n\t\t\trotateX(value(3 * Math.PI / 2), base)\n\t\t]));\n}\n\n/** Skull */\nexport function skull(): Shape {\n\tlet skull =\n\t\ttranslate(value(0, 0.05, 0),\n\t\t\tspheroid(p => expression(`0.333 * cos(cos(${p}.y * 11.0 + 0.55) * ${p}.z * 2.3)`)));\n\n\tconst globeFront = translate(\n\t\tvalue(0.1, 0.23, 0),\n\t\tscale(value(0.574), sphere()));\n\tskull = smoothUnion(value(0.09), skull, globeFront);\n\n\tconst globeBack = translate(\n\t\tvalue(-0.1, 0.24, 0),\n\t\tscale(value(0.574), sphere()));\n\tskull = smoothUnion(value(0.09), skull, globeBack);\n\n\tconst eyeBrow = translate(value(0.24, 0.07, 0.1),\n\t\tspheroid(p => expression(`0.126 * cos(${p}.y * 7.0 + 0.49)`)));\n\tskull = smoothUnion(value(0.02), skull, eyeBrow);\n\n\tconst lateralHole = translate(value(0.15, -0.01, 0.31),\n\t\tspheroid(p => expression(`0.098 * cos(${p}.x * 0.59 + 0.089)`)));\n\tskull = smoothDifference(value(0.02), skull, lateralHole);\n\n\tconst cheekBone = translate(value(0.21, -0.13, 0.18),\n\t\tscale(value(0.077), sphere()));\n\tskull = smoothUnion(value(0.04), skull, cheekBone);\n\n\tlet inside = translate(value(0, 0.05, 0),\n\t\tspheroid(p => expression(`0.315 * cos(cos(${p}.y * 11.0 + 0.55) * ${p}.z * 2.3)`)))\n\tinside = smoothUnion(value(0.02),\n\t\tinside,\n\t\ttranslate(value(0.10, 0.23, 0),\n\t\t\tscale(value(0.511),\n\t\t\t\tsphere())));\n\tinside = smoothUnion(value(0.02),\n\t\tinside, translate(value(-0.1, 0.24, 0),\n\t\t\tscale(value(0.511),\n\t\t\t\tsphere())));\n\tinside = smoothUnion(value(0.02),\n\t\tinside,\n\t\ttranslate(value(0, 0.24, 0),\n\t\t\tscale(value(0.511),\n\t\t\t\tsphere())));\n\tskull = smoothDifference(value(0.02), skull, inside);\n\n\tconst eyeBall = translate(value(0.32, -0.04, 0.140),\n\t\tspheroid(p => expression(`0.098 * cos(${p}.y * 10.0 - 0.04)`)))\n\tskull = smoothDifference(value(0.03), skull, eyeBall);\n\n\tlet nose = translate(\n\t\tvalue(0.22, -0.05, 0),\n\t\tspheroid(p => expression(`0.123 * cos(sin(${p}.y * 22.0 - 1.1) * ${p}.z * 24.0)`)));\n\tnose = smoothDifference(value(0.02),\n\t\tnose,\n\t\ttranslate(value(0.32, -0.04, 0.140),\n\t\t\tspheroid(p => expression(`0.123 * cos(${p}.y * 10.0 - 0.4)`))));\n\tnose = smoothDifference(value(0.02),\n\t\tnose,\n\t\ttranslate(value(0, 0.05, 0),\n\t\t\tspheroid(p => expression(`0.32 * cos(cos(${p}.y * 11.0 + 0.5) * ${p}.z * 2.3)`))));\n\tskull = smoothUnion(value(0.015), skull, nose);\n\n\tconst noseInside = translate(value(0.228, -0.09, 0),\n\t\tspheroid(p => expression(`0.11 * cos(sin(${p}.y * 18.0 - 1.62) * ${p}.z * 29.0)`)));\n\tskull = smoothDifference(value(0.005),\n\t\tskull,\n\t\tnoseInside);\n\n\tconst cut = translate(value(-0.15, -0.97, 0),\n\t\tscale(value(1.75),\n\t\t\tsphere()));\n\tskull = smoothDifference(value(0.01), skull, cut);\n\n\tlet upperJaw = translate(value(0.13, -0.26, 0),\n\t\tscale(value(0.315),\n\t\t\tsphere()));\n\tupperJaw = smoothDifference(value(0.01),\n\t\tupperJaw,\n\t\ttranslate(value(0.125, -0.3, 0),\n\t\t\tscale(value(0.28),\n\t\t\t\tsphere())));\n\tupperJaw = smoothDifference(value(0.03),\n\t\tupperJaw,\n\t\ttranslate(value(-0.2, -0.1, 0),\n\t\t\tscale(value(0.63),\n\t\t\t\tsphere())));\n\tupperJaw = smoothDifference(value(0.03),\n\t\tupperJaw,\n\t\ttranslate(value(0.13, -0.543, 0),\n\t\t\tscale(value(0.63),\n\t\t\t\tsphere())));\n\tupperJaw = difference(\n\t\tupperJaw,\n\t\ttranslate(value(0, 0.02, 0),\n\t\t\tspheroid(p => expression(`0.315 * cos(cos(${p}.y * 11.0 + 0.22) * ${p}.z * 2.3)`))));\n\tskull = smoothUnion(value(0.04), skull, upperJaw);\n\n\tlet lowerJaw = translate(value(0.1, -0.32, 0),\n\t\tscale(value(0.301),\n\t\t\tsphere()));\n\tlowerJaw = smoothDifference(value(0.02),\n\t\tlowerJaw,\n\t\ttranslate(value(0.1, -0.32, 0),\n\t\t\tscale(value(0.259),\n\t\t\t\tsphere())));\n\tlowerJaw = smoothDifference(value(0.02),\n\t\tlowerJaw,\n\t\ttranslate(value(0.1, -0.034, 0),\n\t\t\tscale(value(0.721),\n\t\t\t\tsphere())));\n\tlowerJaw = smoothDifference(value(0.02),\n\t\tlowerJaw,\n\t\ttranslate(value(0, -0.4, 0),\n\t\t\tscale(value(0.245),\n\t\t\t\tsphere())));\n\tlowerJaw = smoothUnion(value(0.13),\n\t\tlowerJaw,\n\t\toffset(p => expression(`0.04 - 0.03 * cos(${p}.y * 20.2), -0.23, 0.27 + sin(${p}.y) * 0.27`),\n\t\t\tbox(value(0.03, 0.12, 0.014))));\n\tlowerJaw = difference(\n\t\tlowerJaw,\n\t\ttranslate(value(0, 0.153, 0.2),\n\t\t\tscale(value(0.595),\n\t\t\t\tsphere())));\n\tlowerJaw = smoothUnion(\n\t\tvalue(0.08),\n\t\tlowerJaw,\n\t\ttranslate(value(0.19, -0.44, 0.05),\n\t\t\tscale(value(0.035),\n\t\t\t\tsphere())));\n\tskull = smoothUnion(value(0.02), skull, lowerJaw);\n\n\tlet teeth = translate(value(0.26, -0.29, 0.018), scale(value(0.0371), sphere()));\n\tteeth = union(teeth, translate(value(0.25, -0.288, 0.05), scale(value(0.035), sphere())));;\n\tteeth = union(teeth, translate(value(0.235, -0.29, 0.08), scale(value(0.035), sphere())));;\n\tteeth = union(teeth, translate(value(0.215, -0.285, 0.1), scale(value(0.035), sphere())));;\n\tteeth = difference(teeth, translate(value(0.16, -0.35, 0), scale(value(0.231), sphere())));;\n\tteeth = union(teeth, translate(value(0.18, -0.28, 0.115), scale(value(0.035), sphere())));;\n\tteeth = union(teeth, translate(value(0.14, -0.28, 0.115), scale(value(0.042), sphere())));;\n\tteeth = union(teeth, translate(value(0.11, -0.28, 0.115), scale(value(0.042), sphere())));;\n\tteeth = union(teeth, translate(value(0.08, -0.28, 0.115), scale(value(0.042), sphere())));;\n\tskull = smoothUnion(value(0.03), skull, teeth);\n\n\tteeth = translate(value(0.23, -0.34, 0.018), scale(value(0.0371), sphere()));\n\tteeth = union(teeth, translate(value(0.22, -0.34, 0.048), scale(value(0.0353), sphere())));;\n\tteeth = union(teeth, translate(value(0.20, -0.345, 0.078), scale(value(0.0353), sphere())));;\n\tteeth = union(teeth, translate(value(0.17, -0.35, 0.098), scale(value(0.0353), sphere())));;\n\tteeth = union(teeth, translate(value(0.14, -0.35, 0.11), scale(value(0.0353), sphere())));;\n\tteeth = union(teeth, translate(value(0.11, -0.35, 0.11), scale(value(0.0353), sphere())));;\n\tteeth = union(teeth, translate(value(0.08, -0.35, 0.11), scale(value(0.0353), sphere())));;\n\tskull = smoothUnion(value(0.025), skull, teeth);\n\n\tskull = mirror(value(0, 0, 1), skull);\n\n\treturn skull;\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/shape.ts","/**\n * Module for creating a [[Camera]]\n */\n\n/** Imports */\nimport { Expression, expression, value } from './expression';\n\nexport interface Camera {\n\t/** Location of the camera */\n\treadonly eye: Expression;\n\t/** Location of the target */\n\treadonly target: Expression;\n\t/** Up direction vector */\n\treadonly up: Expression;\n\t/** Field of view angle in radians */\n\treadonly fieldOfView: Expression;\n\t/** Aperture size for depth of field */\n\treadonly aperture: Expression;\n\t/** Focal distance relative to target distance */\n\treadonly focalFactor: Expression;\n}\n\nexport interface CameraOptions {\n\t/** \n\t * Location of the camera\n\t * \n\t * Default: (0, 0, -1) \n\t * */\n\teye?: Expression;\n\t/** \n\t * Location of the target\n\t * \n\t * Default: (0, 0, 0)\n\t */\n\ttarget?: Expression;\n\t/** \n\t * Up direction vector \n\t * \n\t * Default: (0, 1, 0)\n\t*/\n\tup?: Expression;\n\t/** \n\t * Field of view angle in radians\n\t * \n\t * Default: 90 degrees \n\t */\n\tfieldOfView?: Expression;\n\t/** \n\t * Aperture size for depth of field \n\t * \n\t * Default: 0\n\t*/\n\taperture?: Expression;\n\t/** \n\t * Focal distance relative to target distance \n\t * \n\t * Default: 1\n\t*/\n\tfocalFactor?: Expression;\n}\n\n/** Create a [[Camera]] */\nexport function camera(values?: CameraOptions): Camera {\n\tvalues = values || {};\n\treturn {\n\t\teye: values.eye || value(0, 0, -1),\n\t\ttarget: values.target || value(0, 0, 0),\n\t\tup: values.up || value(0, 1, 0),\n\t\tfieldOfView: values.fieldOfView || value(90 / 180.0 * Math.PI),\n\t\taperture: values.aperture || value(0.0),\n\t\tfocalFactor: values.focalFactor || value(1.0)\n\t};\n}\n\nexport interface OrbitOptions {\n\t/** \n\t * Location of the target\n\t * \n\t * Default: (0, 0, 0)\n\t */\n\ttarget?: Expression,\n\t/** \n\t * Orbit radius \n\t * \n\t * Default: 1\n\t*/\n\tradius?: Expression,\n\t/** \n\t * Up direction vector \n\t * \n\t * Default: (0, 1, 0)\n\t*/\n\tup?: Expression,\n\t/** \n\t * Offset in spherical coordinates \n\t * \n\t * Default: (0, 0)\n\t*/\n\toffset?: Expression,\n\t/** \n\t * Field of view angle in radians\n\t * \n\t * Default: 90 degrees \n\t */\n\tfieldOfView?: Expression,\n\t/** \n\t * Aperture size for depth of field \n\t * \n\t * Default: 0\n\t*/\n\taperture?: Expression,\n\t/** \n\t * Focal distance relative to target distance \n\t * \n\t * Default: 1\n\t*/\n\tfocalFactor?: Expression\n}\n\n/** Create an orbiting [[Camera]] controlled by the mouse */\nexport function orbit(values?: OrbitOptions): Camera {\n\tvalues = values || {};\n\tvalues.target = values.target || value(0, 0, 0);\n\tvalues.offset = values.offset || value(0, 0);\n\tvalues.radius = values.radius || value(1);\n\treturn camera({\n\t\ttarget: values.target,\n\t\teye: expression(\n\t\t\t`${values.target} + ${values.radius}.x * spherical((mouse + ${values.offset}.xy) * vec2(PI, 0.5 * PI) + vec2(0.5 * PI))`),\n\t\tup: values.up,\n\t\tfieldOfView: values.fieldOfView,\n\t\taperture: values.aperture,\n\t\tfocalFactor: values.focalFactor\n\t});\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/camera.ts","/** \n * Module for rendering options\n */\n\n/** Rendering configuration */\nexport interface Options {\n    /** Render target width in pixels */\n    readonly width: number;\n    /** Render target height in pixels */\n    readonly height: number;\n    /** A value close to 0 */\n    readonly epsilon: number;\n    /** Raymarching iteration count */\n    readonly steps: number;\n    /** Total light bounces */\n    readonly bounces: number;\n    /** Iterations per frame */\n    readonly iterations: number;\n    /** \n     * Percentage of scene that remains after each iteration. \n     * Use a value less than 1 for an animated scene */\n    readonly memory: number;\n    /** Use cheaper normal calculation */\n    readonly cheapNormals: boolean;\n    /** \n     * Step factor used to determine rate or raymarching advancement. \n     * 0 to 1. Smaller numbers can reduce artifacts.  */\n    readonly stepFactor: number;\n    /** Scene gamma for exposure adjustment */\n    readonly gamma: number;\n}\n\n/** Rendering configuration */\nexport interface OptionsOptions {\n    /** \n     * Render target width in pixels \n     * \n     * Default: 256\n     */\n    width?: number;\n    /** \n     * Render target height in pixels \n     * \n     * Default: 256\n     */\n    height?: number;\n    /** \n     * A value close to 0 \n     * \n     * Default: 1e-5\n     */\n    epsilon?: number;\n    /** \n     * Raymarching iteration count \n     * \n     * Default: 100\n     */\n    steps?: number;\n    /** \n     * Total light bounces \n     * \n     * Default: 8\n     */\n    bounces?: number;\n    /** \n     * Iterations per frame\n     * \n     * Default: 1\n     */\n    iterations?: number;\n    /** \n     * Percentage of scene that remains after each iteration. \n     * Use a value less than 1 for an animated scene \n     * \n     * Default: 1\n     */\n    memory?: number;\n    /** \n     * Use cheaper normal calculation \n     * \n     * Default: false\n     */\n    cheapNormals?: boolean;\n    /** \n     * Step factor used to determine rate or raymarching advancement. \n     * 0 to 1. Smaller numbers can reduce artifacts.\n     * \n     * Default: 0.9\n     */\n    stepFactor?: number;\n    /** \n     * Scene gamma for exposure adjustment \n     * \n     * Default: 2.2\n     */\n    gamma?: number;\n}\n\n/** Create an [[Options]] */\nexport function options(values?: OptionsOptions): Options {\n    values = values || {};\n    return Object.assign({\n        width: 256,\n        height: 256,\n        epsilon: 1e-5,\n        steps: 100,\n        bounces: 8,\n        iterations: 1,\n        memory: 1.0,\n        cheapNormals: false,\n        stepFactor: 0.9,\n        gamma: 2.2\n    }, values || {});\n}\n\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/options.ts","import {\n\tcamera,\n\tcube,\n\tcylinder,\n\tdifference,\n\tdodecahedron,\n\texpression,\n\tintersection,\n\tmaterial,\n\tmodel,\n\tOptions,\n\toptions,\n\torbit,\n\tplane,\n\trotateY,\n\tscale,\n\tScene,\n\tscene,\n\tShape,\n\tsierpinski,\n\tskull,\n\tsmoothBox,\n\tsphere,\n\tspotlight,\n\tstretch,\n\ttetrahedron,\n\ttranslate,\n\tvalue,\n\tviewer,\n\tViewer,\n} from 'rayity/lib';\n\ninterface Example {\n\treadonly start: () => void;\n\treadonly stop: () => void;\n}\n\nfunction example(id: string, scene: Scene, options: Options): Example | null {\n\tconst element = <HTMLElement>document.querySelector(`example#${id}`);\n\tif (element === null)\n\t\treturn null;\n\n\n\tlet view: Viewer | null = null;\n\tlet example: Example = {\n\t\tstart: () => {\n\t\t\tif (view !== null)\n\t\t\t\treturn\n\t\t\tview = viewer(element, scene, options);\n\t\t},\n\t\tstop: () => {\n\t\t\tif (view === null)\n\t\t\t\treturn;\n\t\t\tview.stop();\n\t\t}\n\t};\n\n\telement.addEventListener(\"click\", () =>\n\t\texample.start());\n\n\treturn example;\n}\n\nfunction simpleExample(id: string, shape: Shape) {\n\treturn example(id, scene({\n\t\tcamera: orbit({\n\t\t\tradius: value(2.5),\n\t\t\toffset: value(-0.2, -0.5),\n\t\t\tfieldOfView: value(45 / 180 * Math.PI)\n\t\t}),\n\t\tmodels: [\n\t\t\tmodel({\n\t\t\t\tshape: scale(value(10000), sphere()),\n\t\t\t\tmaterial: spotlight({\n\t\t\t\t\tdirection: value(1, 1, 0),\n\t\t\t\t\tspread: value(0.25),\n\t\t\t\t\tcolor: value(0.25),\n\t\t\t\t\tambient: value(1)\n\t\t\t\t})\n\t\t\t}),\n\t\t\tmodel({\n\t\t\t\tshape: shape,\n\t\t\t\tmaterial: material({\n\t\t\t\t\tcolor: value(0.8, 0.9, 0.1)\n\t\t\t\t})\n\t\t\t})\n\t\t]\n\t}), options({\n\t\twidth: 256,\n\t\theight: 256,\n\t\tepsilon: 1e-4,\n\t\tsteps: 100,\n\t\tbounces: 4,\n\t\titerations: 1,\n\t\tcheapNormals: false,\n\t\tgamma: 1.0\n\t}))\n}\n\nexample(\"cornell\", scene({\n\tcamera: orbit({\n\t\tradius: value(7),\n\t\tfieldOfView: value(45 / 180 * Math.PI),\n\t}),\n\tmodels: [\n\t\tmodel({\n\t\t\tshape: plane(value(0, -1, 0), value(2))\n\t\t}),\n\t\tmodel({\n\t\t\tshape: plane(value(0, 1, 0), value(2))\n\t\t}),\n\t\tmodel({\n\t\t\tshape: plane(value(0, 0, 1), value(2))\n\t\t}),\n\t\tmodel({\n\t\t\tshape: plane(value(1, 0, 0), value(2)),\n\t\t\tmaterial: material({\n\t\t\t\tcolor: value(1, 0.5, 0.5)\n\t\t\t})\n\t\t}),\n\t\tmodel({\n\t\t\tshape: plane(value(-1, 0, 0), value(2)),\n\t\t\tmaterial: material({\n\t\t\t\tcolor: value(0.5, 1, 0.5)\n\t\t\t})\n\t\t}),\n\t\tmodel({\n\t\t\tshape: translate(value(0, 1.999, 0),\n\t\t\t\tintersection(\n\t\t\t\t\tscale(value(2.5), cylinder()),\n\t\t\t\t\tplane(value(0, -1, 0), value(0)))),\n\t\t\tmaterial: material({\n\t\t\t\temissivity: value(1, 0.80, 0.65)\n\t\t\t})\n\t\t}),\n\t\tmodel({\n\t\t\tshape: translate(value(-0.2, -1.5, 1),\n\t\t\t\tsphere()),\n\t\t\tmaterial: material({\n\t\t\t\tcolor: value(0.8, 0.8, 1),\n\t\t\t\tsmoothness: value(0.9999),\n\t\t\t\ttransmittance: value(0.9),\n\t\t\t\trefraction: value(1.4)\n\t\t\t})\n\t\t}),\n\t\tmodel({\n\t\t\tshape: translate(value(1, -1, -0.5),\n\t\t\t\trotateY(value(0.5),\n\t\t\t\t\tsmoothBox(value(1, 2, 1), value(0.6)))),\n\t\t\tmaterial: material({\n\t\t\t\tcolor: value(1, 0.9, 0.8),\n\t\t\t\tsmoothness: value(0.999)\n\t\t\t})\n\t\t}),\n\t\tmodel({\n\t\t\tshape: translate(value(-1, -1.5, -0.8),\n\t\t\t\trotateY(value(0.8), cube())),\n\t\t\tmaterial: material({\n\t\t\t\tcolor: value(0.7)\n\t\t\t})\n\t\t})\n\t]\n}), options({\n\twidth: 512,\n\theight: 512,\n\tepsilon: 1e-4,\n\tsteps: 50,\n\tbounces: 10,\n\titerations: 2,\n\tcheapNormals: true,\n\tgamma: 3\n}));\n\nsimpleExample(\"dodecahedron\", dodecahedron());\nsimpleExample(\"cube\", cube());\nsimpleExample(\"sierpinski\", scale(value(0.75), sierpinski()));\nsimpleExample(\"tetrahedron\", scale(value(0.75), tetrahedron()));\n\n\n\n\n// WEBPACK FOOTER //\n// ./index.ts","/**\n * Rayity index\n */\n\n/** Exports */\nexport * from \"./expression\";\nexport * from \"./model\";\nexport * from \"./material\";\nexport * from \"./scene\";\nexport * from \"./shape\";\nexport * from \"./viewer\";\nexport * from \"./camera\";\nexport * from \"./options\";\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/index.ts","/** \n * Module for creating a [[Model]]\n */\n\n/** Imports */\nimport { Material, material } from './material';\nimport { Shape, sphere } from './shape';\n\n/** An object in a [[Scene]] */\nexport interface Model {\n\t/** Unique model identifier */\n\treadonly id: number;\n\t/** Model's [[Shape]] */\n\treadonly shape: Shape;\n\t/** Model's [[Material]] */\n\treadonly material: Material;\n}\n\nexport interface ModelOptions {\n\t/** Model's [[Shape]] */\n\tshape?: Shape;\n\t/** Model's [[Material]] */\n\tmaterial?: Material;\n}\n\nlet id = 1;\n\n/** Create a [[Model]] */\nexport function model(values?: ModelOptions): Model {\n\treturn Object.assign({\n\t\tid: id++,\n\t\tshape: sphere(),\n\t\tmaterial: material({})\n\t}, values || {});\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/model.ts","/**\n * Module for creating a [[Scene]]\n */\n\n/** Imports */\nimport { Camera, orbit } from './camera';\nimport { value } from './expression';\nimport { Material, material } from './material';\nimport { Model } from './model';\n\nexport interface Scene {\n\t/** [[Model]]s in the scene */\n\treadonly models: Model[];\n\t/** Scene [[Camera]] */\n\treadonly camera: Camera;\n\t/** Scene air [[Material]] */\n\treadonly air: Material;\n}\n\nexport interface SceneOptions {\n\t/** \n\t * [[Model]]s in the scene \n\t * \n\t * Default: []\n\t */\n\tmodels?: Model[];\n\t/** \n\t * Scene [[Camera]] \n\t * \n\t * Default: [[orbit]]()\n\t */\n\tcamera?: Camera;\n\t/** \n\t * Scene air [[Material]] \n\t * \n\t * Default: [[material]]({ color: value(1, 1, 1) })\n\t */\n\tair?: Material;\n}\n\n/** Create a [[Scene]] */\nexport function scene(values?: SceneOptions): Scene {\n\treturn Object.assign({\n\t\tmodels: [],\n\t\tcamera: orbit(),\n\t\tair: material({\n\t\t\tcolor: value(1, 1, 1)\n\t\t})\n\t}, values || {});\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/scene.ts","/** \n * Module for creating a Rayity viewer\n */\n\nimport { Options, options as _options } from './options';\nimport { renderer } from './renderer';\nimport { Scene } from './scene';\n\n/** A Rayity viewer to render a [[Scene]] to an [[HTMLElement] */\nexport interface Viewer {\n\tstop: () => void;\n}\n\n/** Create a [[Viewer]] */\nexport function viewer(\n\telement: HTMLElement,\n\tscene: Scene,\n\toptions?: Options): Viewer {\n\n\toptions = options || _options();\n\n\tconst canvas = document.createElement(\"canvas\");\n\tcanvas.width = options.width;\n\tcanvas.height = options.height;\n\telement.appendChild(canvas);\n\n\tconst gl = canvas.getContext(\"webgl\", {\n\t\tpreserveDrawingBuffer: true\n\t});\n\tif (gl === null)\n\t\tthrow \"Could not create WebGL context\";\n\n\tconst variables = {\n\t\ttime: 0,\n\t\tclicked: false,\n\t\tmouse: { x: 0.0, y: 0.0 }\n\t};\n\n\tconst renderer_ = renderer(gl, scene, options, variables);\n\n\tcanvas.addEventListener(\"click\", event => {\n\t\tif (!event.altKey)\n\t\t\treturn;\n\t\tconst link = document.createElement(\"a\");\n\t\tlink.setAttribute(\"download\", \"render.png\");\n\t\tlink.setAttribute(\"href\", canvas.toDataURL());\n\t\tlink.click();\n\t});\n\n\tcanvas.addEventListener(\"mousedown\", () => variables.clicked = true);\n\tdocument.addEventListener(\"mouseup\", () => variables.clicked = false);\n\n\tcanvas.addEventListener(\"mousemove\", event => {\n\t\tif (variables.clicked) {\n\t\t\tvariables.mouse.x += event.movementX / canvas.clientWidth;\n\t\t\tvariables.mouse.y += -event.movementY / canvas.clientHeight;\n\t\t}\n\t});\n\n\tlet start = 0;\n\tlet running = true;\n\n\tfunction loop(time: number) {\n\t\tif (!start) start = time;\n\t\tvariables.time = (time - start) / 1000.0;\n\n\t\trenderer_.render();\n\n\t\tif (running)\n\t\t\trequestAnimationFrame(loop);\n\t}\n\n\trequestAnimationFrame(loop);\n\n\treturn {\n\t\tstop: () => {\n\t\t\trunning = false;\n\t\t\telement.removeChild(canvas);\n\t\t}\n\t};\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/viewer.ts","/**\n * Functionality related to rendering a [[Scene]] in a WebbGL context\n */\n\n/** Imports */\nimport { build } from './build';\nimport { Options } from './options';\nimport { Scene } from './scene';\n\n/** Interface to render a scene to a WebGL context */\nexport interface Renderer {\n\t/** Render function */\n\treadonly render: () => void;\n}\n\n/** A 2D point */\nexport interface Point {\n\t/** X coordinate */\n\tx: number;\n\t/** Y coordinate */\n\ty: number;\n}\n\n/** Interface to store scene variables */\nexport interface Variables {\n\t/* Scene time in seconds */\n\ttime: number;\n\t/** If mouse is clicked */\n\tclicked: boolean;\n\t/** Mouse position */\n\tmouse: Point;\n}\n\n/** Create a [[Renderer]] */\nexport function renderer(\n\tgl: WebGLRenderingContext,\n\tscene: Scene,\n\toptions: Options,\n\tvariables?: Variables): Renderer {\n\n\tif (!gl.getExtension(\"OES_texture_float\"))\n\t\tthrow \"No float texture support\";\n\n\tconst textures = [0, 1].map(_ => {\n\t\tconst texture = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, options.width, options.height, 0, gl.RGBA, gl.FLOAT, null);\n\t\treturn texture;\n\t});\n\n\tconst framebuffer = gl.createFramebuffer();\n\n\tconst renderShader = gl.createShader(gl.FRAGMENT_SHADER);\n\tgl.shaderSource(renderShader, `\n\t\tprecision highp float;\n\n\t\tvarying vec2 uv;\n\t\tuniform sampler2D texture;\n\t\t\n\t\tvoid main() {\n\t\t\tvec4 result = texture2D(texture, uv * 0.5 - 0.5);\n\t\t\tgl_FragColor = vec4(pow(result.xyz / result.w, vec3(1.0 / ${options.gamma.toFixed(10)})), 1.0);\n\t\t}`);\n\tgl.compileShader(renderShader);\n\n\tconst vertexShader = gl.createShader(gl.VERTEX_SHADER);\n\tgl.shaderSource(vertexShader, `\n\t\tattribute vec2 position;\n\t\tvarying vec2 uv;\n\t\t\n\t\tvoid main() {\n\t\t\tgl_Position = vec4(position, 0, 1);\n\t\t\tuv = position.xy;\n\t\t}`);\n\tgl.compileShader(vertexShader);\n\n\tconst screenShader = gl.createShader(gl.FRAGMENT_SHADER);\n\tgl.shaderSource(screenShader, build(scene, options));\n\tgl.compileShader(screenShader);\n\tif (gl.getShaderInfoLog(screenShader))\n\t\tthrow gl.getShaderInfoLog(screenShader);\n\n\tconst program = gl.createProgram();\n\tgl.attachShader(program, vertexShader);\n\tgl.attachShader(program, screenShader);\n\tgl.linkProgram(program);\n\n\tconst renderProgram = gl.createProgram();\n\tgl.attachShader(renderProgram, vertexShader);\n\tgl.attachShader(renderProgram, renderShader);\n\tgl.linkProgram(renderProgram);\n\n\tconst vertices = Array(\n\t\t-1, -1,\n\t\t-1, 1,\n\t\t1, 1,\n\t\t1, -1);\n\tconst indices = Array(0, 1, 2, 0, 2, 3);\n\n\tconst vertexBuffer = gl.createBuffer();\n\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\n\tconst indexBuffer = gl.createBuffer();\n\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n\n\tgl.useProgram(program);\n\n\tconst resolution = gl.getUniformLocation(program, \"resolution\");\n\tgl.uniform2f(resolution, options.width, options.height);\n\n\tconst position = gl.getAttribLocation(program, \"position\");\n\tgl.enableVertexAttribArray(position);\n\tgl.vertexAttribPointer(position, 2, gl.FLOAT, false, 0, 0);\n\n\tgl.viewport(0, 0, options.width, options.height);\n\n\tlet odd = false;\n\n\treturn {\n\t\trender: function () {\n\t\t\tconst read = textures[odd ? 0 : 1];\n\t\t\tconst write = textures[odd ? 1 : 0];\n\n\t\t\tconst variables_ = Object.assign({\n\t\t\t\ttime: 0,\n\t\t\t\tclicked: false,\n\t\t\t\tmouse: { x: 0, y: 0 }\n\t\t\t}, variables || {});\n\n\t\t\tgl.useProgram(program);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, read);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, write, 0);\n\t\t\tgl.uniform1f(gl.getUniformLocation(program, \"time\"), variables_.time);\n\t\t\tgl.uniform2f(gl.getUniformLocation(program, \"mouse\"), variables_.mouse.x, variables_.mouse.y);\n\t\t\tgl.uniform1i(gl.getUniformLocation(program, \"clicked\"), variables_.clicked ? 1 : 0);\n\t\t\tgl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n\n\t\t\tgl.useProgram(renderProgram);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, write);\n\t\t\tgl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n\n\t\t\todd = !odd;\n\t\t}\n\t};\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/renderer.ts","/** \n * Functionality for converting a [[Scene]] into GLSL [[Code]] \n */\n\n/** Imports */\nimport { Code, Expression, expression, variable } from './expression';\nimport { Model } from './model';\nimport { Options } from './options';\nimport { Scene } from './scene';\n\nfunction buildExpression(expression: Expression) {\n\treturn buildExpressions([expression]);\n}\n\nfunction buildExpressions(expressions: Expression[]) {\n\treturn dependencyTree(expressions)\n\t\t.map(expression => `\tvec3 ${expression} = vec3(${expression.body});`)\n\t\t.reduce((a, b) => a + \"\\n\" + b, \"\");\n}\n\nfunction dependencyTree(expressions: Expression[]): Expression[] {\n\tconst cache: { [id: string]: Expression[] } = {};\n\n\tfunction dependencies(expression: Expression): Expression[] {\n\t\tif (cache[expression.id])\n\t\t\treturn cache[expression.id];\n\t\treturn cache[expression.id] = uniqueExpressions(\n\t\t\tdependencieses(expression.dependencies)\n\t\t\t\t.concat(expression));\n\t}\n\n\tfunction dependencieses(expressions: Expression[]): Expression[] {\n\t\treturn uniqueExpressions(\n\t\t\texpressions\n\t\t\t\t.map(_ => dependencies(_))\n\t\t\t\t.reduce((a, b) => a.concat(b), []));\n\t}\n\n\tfunction uniqueExpressions(expressions: Expression[]): Expression[] {\n\t\treturn expressions.filter((x, i) =>\n\t\t\texpressions.findIndex(_ => _.id === x.id) === i);\n\t}\n\n\treturn dependencieses(expressions);\n}\n\nfunction buildModel(\n\tmodel: Model,\n\toptions: {\n\t\tcheapNormals: boolean\n\t}): Code {\n\tlet distance = model.shape.call(variable(\"p\"));\n\tlet code = `\n\t\nfloat distance${model.id}(vec3 p) {\n\t${buildExpression(distance)}\n\treturn ${distance}.x;\n}\n\nMaterial material${model.id}(vec3 p, vec3 n, vec3 d) {\n\tMaterial m;\n\t${buildExpressions([\n\t\t\tmodel.material.transmittance,\n\t\t\tmodel.material.smoothness,\n\t\t\tmodel.material.refraction,\n\t\t\tmodel.material.scatter,\n\t\t\tmodel.material.color,\n\t\t\tmodel.material.emissivity])}\n\tm.transmittance = ${model.material.transmittance}.x;\n\tm.smoothness = ${model.material.smoothness}.x;\n\tm.refraction = ${model.material.refraction}.x;\n\tm.scatter = ${model.material.scatter}.x;\n\tm.color = ${model.material.color};\n\tm.emissivity = ${model.material.emissivity};\n\treturn m;\n}`;\n\n\tif (options.cheapNormals)\n\t\tcode += `\n\nvec3 normal${model.id}(vec3 p) {\n\tconst vec3 a = vec3( 1, 1, 1) / sqrt(3.0);\n\tconst vec3 b = vec3( 1,-1,-1) / sqrt(3.0);\n\tconst vec3 c = vec3(-1, 1,-1) / sqrt(3.0);\n\tconst vec3 d = vec3(-1,-1, 1) / sqrt(3.0);\n\tfloat z = distance${model.id}(p);\n\treturn normalize(\n\t\ta * (distance${model.id}(p + a * epsilon) - z) + \n\t\tb * (distance${model.id}(p + b * epsilon) - z) +\n\t\tc * (distance${model.id}(p + c * epsilon) - z) +\n\t\td * (distance${model.id}(p + d * epsilon) - z));\n}`;\n\n\telse\n\t\tcode += `\n\nvec3 normal${model.id}(vec3 p) {\n\treturn normalize(vec3(\n\t\tdistance${model.id}(p + vec3(epsilon, 0, 0)) -\n\t\tdistance${model.id}(p - vec3(epsilon, 0, 0)),\n\t\tdistance${model.id}(p + vec3(0, epsilon, 0)) -\n\t\tdistance${model.id}(p - vec3(0, epsilon, 0)),\n\t\tdistance${model.id}(p + vec3(0, 0, epsilon)) -\n\t\tdistance${model.id}(p - vec3(0, 0, epsilon))));\n}`;\n\n\treturn code;\n}\n\nfunction buildScene(\n\tscene: Scene,\n\toptions: {\n\t\tcheapNormals: boolean\n\t}): Code {\n\treturn scene.models\n\t\t.map(_ => buildModel(_, options))\n\t\t.reduce((a, b) => a + b, \"\") + `\n\t\t\nClosest calculateClosest(vec3 position) {\n\tClosest closest;\n\tfloat distance;\n\n\tclosest.object = 0;\n\tclosest.distance = MAX_VALUE;` +\n\n\t\tscene.models\n\t\t\t.map((model, i) => `\n\t\n\tdistance = abs(distance${model.id}(position));\n\tif (distance < closest.distance) {\n\t\tclosest.distance = distance;\n\t\tclosest.object = ${model.id};\n\t}`)\n\t\t\t.reduce((a, b) => a + b, \"\") + `\n\t\n\treturn closest;\n}\n\nvec3 calculateNormal(int object, vec3 position) {` +\n\n\t\tscene.models\n\t\t\t.map((model, i) => `\n\t\n\tif (object == ${model.id})\n\t\treturn normal${model.id}(position);`)\n\t\t\t.reduce((a, b) => a + b, \"\") + `\n\t\n\treturn vec3(0, 0, 0);\n}\n\nMaterial calculateMaterial(int object, vec3 position, vec3 normal, vec3 direction) {` +\n\n\t\tscene.models\n\t\t\t.map((model, i) => `\n\t\n\tif (object == ${model.id})\n\t\treturn material${model.id}(position, normal, direction);`)\n\t\t\t.reduce((a, b) => a + b, \"\") + `\n\t\n\tMaterial material;\n\treturn material;\n}`;\n}\n\n/** Generate the GLSL shader for this [[Scene]] */\nexport function build(\n\tscene: Scene,\n\toptions: Options): Code {\n\tconst code = `\nprecision highp float;\n\nuniform sampler2D texture;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform bool clicked;\nuniform float time;\nvarying vec2 uv;\n\nconst float PI = 3.14159;\nconst float MAX_VALUE = 1e10;\n\nconst float epsilon = ${options.epsilon};\nconst int steps = ${options.steps};\nconst int bounces = ${options.bounces};\nconst int iterations = ${options.iterations};\n\nstruct Closest {\n\tint object;\n\tfloat distance;\n};\n\nstruct Material {\n\tfloat transmittance;\n\tfloat smoothness;\n\tfloat refraction;\n\tfloat scatter;\n\tvec3 color;\n\tvec3 emissivity;\n};\n\nClosest calculateClosest(vec3 position);\nvec3 calculateNormal(int object, vec3 position);\nMaterial calculateMaterial(int object, vec3 position, vec3 normal, vec3 direction);\n\nvec2 random(int seed) {\n\tvec2 s = (vec2(1) + uv) * float(seed) + time;\n\treturn vec2(\n\t\tfract(sin(dot(s.xy, vec2(12.9898, 78.233))) * 43758.5453),\n\t\tfract(cos(dot(s.xy, vec2(4.898, 7.23))) * 23421.631));\n}\n\nvec3 ortho(vec3 v) {\n\treturn abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y);\n}\n\nvec3 calculateSample(vec3 normal, float smoothness, vec2 noise) {\n\tvec3 o1 = normalize(ortho(normal));\n\tvec3 o2 = normalize(cross(normal, o1));\n\tnoise.x *= 2.0 * PI;\n\tnoise.y = sqrt(smoothness + (1.0 - smoothness) * noise.y);\n\tfloat q = sqrt(1.0 - noise.y * noise.y);\n\treturn q * (cos(noise.x) * o1  + sin(noise.x) * o2) + noise.y * normal;\n}\n\nvec3 sampleSphere(vec2 noise) {\n\tnoise.x *= 2.0 * PI;\n\tnoise.y = noise.y * 2.0 - 1.0;\n\tfloat q = sqrt(1.0 - noise.y * noise.y);\n\treturn vec3(q * cos(noise.x), q * sin(noise.x), noise.y);\n}\n\nvec3 spherical(vec2 angle) {\n\treturn vec3(sin(angle.y) * cos(angle.x), cos(angle.y), sin(angle.y) * sin(angle.x));\n}\n\nvoid main() {\n\t${buildExpressions([\n\t\t\tscene.camera.eye,\n\t\t\tscene.camera.target,\n\t\t\tscene.camera.up,\n\t\t\tscene.camera.fieldOfView,\n\t\t\tscene.camera.aperture,\n\t\t\tscene.camera.focalFactor])}\n\tvec3 eye = ${scene.camera.eye};\n\tvec3 target = ${scene.camera.target};\n\tvec3 up = ${scene.camera.up};\n\tfloat fieldOfView = ${scene.camera.fieldOfView}.x;\n\tfloat aperture = ${scene.camera.aperture}.x;\n\tfloat focalFactor = ${scene.camera.focalFactor}.x;\n\n\tvec3 look = normalize(target - eye);\n\tup = normalize(up - dot(look, up) * look);\n\tvec3 right = cross(look, up);\n\t\n\tvec3 total;\n\n\tfor(int iteration = 1; iteration <= iterations; iteration++) {\n\t\tvec2 noise = random(iteration);\n\n\t\tvec2 offset = noise.x * aperture * vec2(cos(noise.y * 2.0 * PI), sin(noise.y * 2.0 * PI));\n\t\tvec3 from = eye + offset.x * right + offset.y * up;\n\n\t\tvec2 angle = (uv * 0.5 + (noise - 0.5) / resolution) * fieldOfView;\n\t\tvec3 screen = vec3(cos(angle.y) * sin(angle.x), sin(angle.y), cos(angle.y) * cos(angle.x));\n\t\tvec3 to = eye + focalFactor * length(target - eye) * (right * screen.x + up * screen.y + look * screen.z);\n\n\t\tvec3 direction = normalize(to - from);\n\n\t\tvec3 luminance = vec3(1);\n\n\t\tMaterial air;\n\t\t${buildExpressions([\n\t\t\tscene.air.refraction,\n\t\t\tscene.air.scatter,\n\t\t\tscene.air.emissivity,\n\t\t\tscene.air.color])}\n\t\tair.refraction = ${scene.air.refraction}.x;\n\t\tair.scatter = ${scene.air.scatter}.x;\n\t\tair.emissivity = ${scene.air.emissivity};\n\t\tair.color = ${scene.air.color};\n\n\t\tMaterial current = air;\n\n\t\tfor (int bounce = 1; bounce <= bounces; bounce++) {\n\t\t\tClosest closest;\n\t\t\tvec3 position = from;\n\t\t\tfloat distance = 0.0;\n\n\t\t\tvec2 noise = random(iteration * bounces + bounce);\n\n\t\t\tfloat scatter = -log(noise.y) * current.scatter;\t\t\t\n\n\t\t\tfor (int step = 1; step <= steps; step++) {\n\t\t\t\tclosest = calculateClosest(position);\n\n\t\t\t\tif (closest.distance < epsilon)\n\t\t\t\t\tbreak;\n\n\t\t\t\tdistance = distance + closest.distance * ${options.stepFactor.toFixed(10)};\n\t\t\t\tposition = from + direction * distance;\n\n\t\t\t\tif (scatter > 0.0 && distance >= scatter)\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (closest.object == 0) {\n\t\t\t\ttotal += air.color * luminance;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (scatter > 0.0 && distance >= scatter) {\n\t\t\t\tfrom = position - (distance - scatter) * direction;\n\t\t\t\tdirection = sampleSphere(noise);\n\t\t\t\ttotal += luminance * current.emissivity;\n\t\t\t\tluminance *= current.color;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvec3 normal = calculateNormal(closest.object, position);\n\n\t\t\tMaterial material = calculateMaterial(closest.object, position, normal, direction);\n\n\t\t\ttotal += luminance * material.emissivity;\n\n\t\t\tif (material.color == vec3(0))\n\t\t\t\tbreak;\n\n\t\t\tbool backface = dot(direction, normal) > 0.0; \n\t\t\tif (backface)\n\t\t\t\tnormal = -normal; \n\n\t\t\tnormal = calculateSample(normal, material.smoothness, noise);\n\t\t\t\n\t\t\tif (noise.y < material.transmittance) {\n\t\t\t\tfloat eta;\n\t\t\t\tif (!backface)\n\t\t\t\t\teta = current.refraction / material.refraction;\n\t\t\t\telse\n\t\t\t\t\teta = material.refraction / air.refraction;\n\t\t\t\n\t\t\t\tvec3 refracted = refract(direction, normal, eta);\n\t\t\t\tif (refracted != vec3(0)) {\n\t\t\t\t\tfrom = position - 5.0 * epsilon * normal;\n\t\t\t\t\tdirection = refracted;\n\t\t\t\t\tif (!backface)\n\t\t\t\t\t\tcurrent = material;\n\t\t\t\t\telse\n\t\t\t\t\t\tcurrent = air;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tluminance *= material.color;\t\t\t\t\n\t\t\tfrom = position + 5.0 * epsilon * normal;\n\t\t\tdirection = reflect(direction, normal);\n\t\t}\n\t}\n\n\tvec4 original = texture2D(texture, uv * 0.5 - 0.5);\n\t\n\tif (clicked) \n\t\toriginal *= 0.5;\n\n\toriginal *= ${options.memory.toFixed(10)}; \n\t\t\n\tgl_FragColor = original + vec4(total, iterations);\n\n}` + buildScene(scene, options);\n\n\tconsole.log(code);\n\n\treturn code;\n}\n\n\n// WEBPACK FOOTER //\n// ../rayity/src/build.ts"],"sourceRoot":""}